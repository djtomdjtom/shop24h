<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨‚å–®ç®¡ç†å¾Œå°</title>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --danger-color: #e74c3c;
            --success-color: #2ecc71;
            --light-gray: #f8f9fa;
            --border-color: #ddd;
        }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            max-width: 1100px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
            background-color: #f5f5f5;
        }
        h1, h2, h3 {
            color: #2c3e50;
            margin-top: 0;
        }
        h1 { font-size: 28px; border-bottom: 2px solid var(--primary-color); padding-bottom: 10px; }
        h2 { font-size: 22px; }
        h3 { font-size: 18px; }
        .order-section {
            margin-bottom: 25px;
            border: 1px solid var(--border-color);
            padding: 20px;
            border-radius: 8px;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .price {
            font-size: 24px;
            font-weight: bold;
            color: var(--danger-color);
            margin: 10px 0;
        }
        .promotion {
            background-color: var(--light-gray);
            padding: 12px;
            border-radius: 6px;
            margin: 12px 0;
            border-left: 4px solid var(--primary-color);
        }
        .item {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px dashed var(--border-color);
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
        }
        .item:last-child {
            border-bottom: none;
        }
        .item-details {
            flex: 1;
            min-width: 300px;
        }
        .item-images {
            flex: 1;
            min-width: 300px;
        }
        .image-upload {
            border: 2px dashed #ccc;
            padding: 25px;
            text-align: center;
            margin-bottom: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            background-color: #fafafa;
        }
        .image-upload:hover {
            border-color: var(--primary-color);
            background-color: #f0f8ff;
        }
        .image-upload i {
            font-size: 40px;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: block;
        }
        .image-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 15px;
        }
        .preview-container {
            position: relative;
            width: 120px;
            height: 120px;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .preview-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }
        .preview-image:hover {
            transform: scale(1.05);
        }
        .remove-image {
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--danger-color);
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            line-height: 24px;
            text-align: center;
            cursor: pointer;
            font-size: 14px;
            opacity: 0.8;
            transition: opacity 0.3s;
        }
        .remove-image:hover {
            opacity: 1;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        table, th, td {
            border: 1px solid var(--border-color);
        }
        th, td {
            padding: 12px;
            text-align: left;
        }
        .form-group {
            margin-bottom: 18px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        input[type="text"], input[type="number"], input[type="tel"], select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            box-sizing: border-box;
            font-size: 15px;
            transition: border 0.3s;
        }
        input[type="text"]:focus, input[type="number"]:focus, input[type="tel"]:focus, 
        select:focus, textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        textarea {
            min-height: 80px;
            resize: vertical;
        }
        .btn {
            display: inline-block;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            text-align: center;
            transition: all 0.3s;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }
        .btn-primary:hover {
            background-color: var(--secondary-color);
        }
        .btn-secondary {
            background-color: #95a5a6;
            color: white;
        }
        .btn-secondary:hover {
            background-color: #7f8c8d;
        }
        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }
        .btn-danger:hover {
            background-color: #c0392b;
        }
        .editor-container {
            margin-bottom: 20px;
        }
        .hidden {
            display: none;
        }
        .preview-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            z-index: 1000;
            overflow: auto;
            padding: 20px;
            box-sizing: border-box;
        }
        .preview-content {
            background: white;
            max-width: 900px;
            margin: 30px auto;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }
        .close-preview {
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #aaa;
        }
        .close-preview:hover {
            color: #333;
        }
        .tab-container {
            margin-bottom: 20px;
        }
        .tab-buttons {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 15px;
        }
        .tab-btn {
            padding: 10px 20px;
            cursor: pointer;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-weight: 500;
            color: #555;
            transition: all 0.3s;
        }
        .tab-btn.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        @media (max-width: 768px) {
            .item {
                flex-direction: column;
            }
            .preview-container {
                width: 100px;
                height: 100px;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
    <h1><i class="fas fa-cog"></i> è¨‚å–®ç®¡ç†å¾Œå°</h1>
    
    <div class="tab-container">
        <div class="tab-buttons">
            <button class="tab-btn active" data-tab="product-info">ç”¢å“è³‡è¨Š</button>
            <button class="tab-btn" data-tab="shipping-info">ç‰©æµèˆ‡ä»˜æ¬¾</button>
            <button class="tab-btn" data-tab="preview-tab">è¨‚å–®é è¦½</button>
        </div>
        
        <div id="product-info" class="tab-content active">
            <div class="order-section">
                <h2><i class="fas fa-image"></i> ç”¢å“ä¸»åœ–</h2>
                
                <div class="editor-container">
                    <label for="main-product-image">ç”¢å“ä¸»åœ–:</label>
                    <input type="file" id="main-product-image" accept="image/*" class="hidden">
                    <div id="main-image-upload" class="image-upload">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>é»æ“Šæˆ–æ‹–æ”¾åœ–ç‰‡åˆ°æ­¤å€åŸŸ</p>
                        <p><small>å»ºè­°å°ºå¯¸: 800x800åƒç´ ï¼Œæœ€å¤§5MB</small></p>
                    </div>
                    <div id="main-image-preview" class="image-preview"></div>
                </div>
            </div>
            
            <div class="order-section">
                <h2><i class="fas fa-info-circle"></i> åŸºæœ¬è³‡è¨Š</h2>
                
                <div class="editor-container">
                    <label for="product-title">ç”¢å“æ¨™é¡Œ:</label>
                    <input type="text" id="product-title" value="é«˜é€Ÿè£½å†·é€ä½ å°é¢¨æ‰‡" placeholder="è¼¸å…¥ç”¢å“æ¨™é¡Œ">
                </div>
                
                <div class="editor-container">
                    <label for="product-price">åƒ¹æ ¼:</label>
                    <input type="text" id="product-price" value="NT$990" placeholder="è¼¸å…¥ç”¢å“åƒ¹æ ¼">
                </div>
                
                <div class="editor-container">
                    <label for="group-option">çµ„åˆé¸é … (æ¯è¡Œä¸€é …):</label>
                    <textarea id="group-option" rows="3" placeholder="è¼¸å…¥çµ„åˆé¸é …">2äººçµ„
618å„ªæƒ ğŸ–©è²·äºŒé€ä¸€3äººçµ„å‡åƒ¹ï¼ˆ426ï¼‰
618å„ªæƒ ğŸ–©4äººçµ„~å‡åƒ¹ï¼ˆ395ï¼‰é™200çµ„</textarea>
                </div>
            </div>
            
            <div class="order-section">
                <h2><i class="fas fa-box-open"></i> å•†å“é …ç›®</h2>
                
                <div class="item">
                    <div class="item-details">
                        <h3><i class="fas fa-cube"></i> ç¬¬1ä»¶(å·²é¸)</h3>
                        <div class="editor-container">
                            <label for="item1-color">é¡è‰²:</label>
                            <select id="item1-color">
                                <option value="ç™½è‰²" selected>ç™½è‰²</option>
                                <option value="é»‘è‰²">é»‘è‰²</option>
                                <option value="æ·ºç´«è‰²">æ·ºç´«è‰²</option>
                                <option value="custom">è‡ªè¨‚é¡è‰²...</option>
                            </select>
                            <input type="text" id="item1-custom-color" class="hidden" placeholder="è¼¸å…¥è‡ªè¨‚é¡è‰²" style="margin-top: 8px;">
                        </div>
                    </div>
                    
                    <div class="item-images">
                        <label>å•†å“åœ–ç‰‡:</label>
                        <input type="file" id="item1-image" accept="image/*" class="hidden" multiple>
                        <div id="item1-image-upload" class="image-upload">
                            <i class="fas fa-images"></i>
                            <p>é»æ“Šæˆ–æ‹–æ”¾åœ–ç‰‡åˆ°æ­¤å€åŸŸ</p>
                            <p><small>å¯ä¸Šå‚³å¤šå¼µåœ–ç‰‡</small></p>
                        </div>
                        <div id="item1-image-preview" class="image-preview"></div>
                    </div>
                </div>
                
                <div class="item">
                    <div class="item-details">
                        <h3><i class="fas fa-cube"></i> ç¬¬2ä»¶(å·²é¸)</h3>
                        <div class="editor-container">
                            <label for="item2-color">é¡è‰²:</label>
                            <select id="item2-color">
                                <option value="ç™½è‰²" selected>ç™½è‰²</option>
                                <option value="é»‘è‰²">é»‘è‰²</option>
                                <option value="æ·ºç´«è‰²">æ·ºç´«è‰²</option>
                                <option value="custom">è‡ªè¨‚é¡è‰²...</option>
                            </select>
                            <input type="text" id="item2-custom-color" class="hidden" placeholder="è¼¸å…¥è‡ªè¨‚é¡è‰²" style="margin-top: 8px;">
                        </div>
                    </div>
                    
                    <div class="item-images">
                        <label>å•†å“åœ–ç‰‡:</label>
                        <input type="file" id="item2-image" accept="image/*" class="hidden" multiple>
                        <div id="item2-image-upload" class="image-upload">
                            <i class="fas fa-images"></i>
                            <p>é»æ“Šæˆ–æ‹–æ”¾åœ–ç‰‡åˆ°æ­¤å€åŸŸ</p>
                            <p><small>å¯ä¸Šå‚³å¤šå¼µåœ–ç‰‡</small></p>
                        </div>
                        <div id="item2-image-preview" class="image-preview"></div>
                    </div>
                </div>
                
                <div class="editor-container">
                    <label for="original-price">åŸåƒ¹:</label>
                    <input type="text" id="original-price" value="NT$990" placeholder="è¼¸å…¥ç”¢å“åŸåƒ¹">
                </div>
                
                <div class="editor-container">
                    <label for="order-price">è¨‚å–®åƒ¹æ ¼:</label>
                    <input type="text" id="order-price" value="NT$990" placeholder="è¼¸å…¥è¨‚å–®åƒ¹æ ¼">
                </div>
            </div>
            
            <div class="button-group">
                <button class="btn btn-primary" id="save-btn">
                    <i class="fas fa-save"></i> å„²å­˜è®Šæ›´
                </button>
                <button class="btn btn-secondary" id="next-to-shipping">
                    ä¸‹ä¸€æ­¥: ç‰©æµèˆ‡ä»˜æ¬¾ <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
        
        <div id="shipping-info" class="tab-content">
            <div class="order-section">
                <h2><i class="fas fa-truck"></i> ç‰©æµæ–¹å¼</h2>
                
                <div class="editor-container">
                    <label>ç‰©æµé¸é …:</label>
                    <table>
                        <tr>
                            <td><input type="checkbox" id="delivery1" checked> <label for="delivery1">å®…é…åˆ°åºœ</label></td>
                            <td><input type="checkbox" id="delivery2" checked> <label for="delivery2">7-11å–è²¨</label></td>
                            <td><input type="checkbox" id="delivery3" checked> <label for="delivery3">å…¨å®¶å–è²¨</label></td>
                        </tr>
                    </table>
                </div>
                
                <div class="editor-container">
                    <label for="delivery-note">ç‰©æµèªªæ˜:</label>
                    <textarea id="delivery-note" rows="3" placeholder="è¼¸å…¥ç‰©æµèªªæ˜">æ‚¨çš„åœ°å€éœ€æ˜ç¢ºåˆ°å¸‚å€è·¯è™Ÿï¼ˆæ¨“ã€å®¤ï¼‰ã€‚æœ¬å•†å ´å¯æ¥å—7-11ï¼Œå…¨å®¶çš„ä»£æ”¶ã€‚</textarea>
                </div>
            </div>
            
            <div class="order-section">
                <h2><i class="fas fa-money-bill-wave"></i> ä»˜æ¬¾æ–¹å¼</h2>
                
                <div class="editor-container">
                    <label for="payment-method">ä»˜æ¬¾æ–¹å¼:</label>
                    <select id="payment-method">
                        <option value="è²¨åˆ°ä»˜æ¬¾" selected>è²¨åˆ°ä»˜æ¬¾</option>
                        <option value="ä¿¡ç”¨å¡">ä¿¡ç”¨å¡</option>
                        <option value="éŠ€è¡Œè½‰å¸³">éŠ€è¡Œè½‰å¸³</option>
                        <option value="è¶…å•†ä»˜æ¬¾">è¶…å•†ä»˜æ¬¾</option>
                        <option value="å…¶ä»–">å…¶ä»–</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="customer-name">å§“å:</label>
                    <input type="text" id="customer-name" placeholder="è¼¸å…¥å®¢æˆ¶å§“å">
                </div>
                
                <div class="form-group">
                    <label for="customer-phone">æ‰‹æ©Ÿ:</label>
                    <input type="tel" id="customer-phone" placeholder="è¼¸å…¥å®¢æˆ¶æ‰‹æ©Ÿè™Ÿç¢¼">
                </div>
                
                <div class="form-group">
                    <label for="customer-country">åœ‹å®¶/åœ°å€:</label>
                    <input type="text" id="customer-country" value="å°ç£" placeholder="è¼¸å…¥åœ‹å®¶/åœ°å€">
                </div>
                
                <div class="form-group">
                    <label for="customer-city">é¸æ“‡å¸‚å€:</label>
                    <select id="customer-city">
                        <option value="">è«‹é¸æ“‡</option>
                        <option value="å°åŒ—å¸‚">å°åŒ—å¸‚</option>
                        <option value="æ–°åŒ—å¸‚">æ–°åŒ—å¸‚</option>
                        <option value="å°ä¸­å¸‚">å°ä¸­å¸‚</option>
                        <option value="é«˜é›„å¸‚">é«˜é›„å¸‚</option>
                        <option value="æ¡ƒåœ’å¸‚">æ¡ƒåœ’å¸‚</option>
                        <option value="å°å—å¸‚">å°å—å¸‚</option>
                        <option value="å…¶ä»–">å…¶ä»–</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="customer-district">é¸æ“‡åœ°å€:</label>
                    <select id="customer-district">
                        <option value="">è«‹å…ˆé¸æ“‡å¸‚å€</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="customer-address">è©³ç´°åœ°å€:</label>
                    <input type="text" id="customer-address" placeholder="è¼¸å…¥è©³ç´°åœ°å€">
                </div>
                
                <div class="form-group">
                    <label for="customer-message">ç•™è¨€:</label>
                    <textarea id="customer-message" rows="3" placeholder="è¼¸å…¥å®¢æˆ¶ç•™è¨€"></textarea>
                </div>
            </div>
            
            <div class="button-group">
                <button class="btn btn-secondary" id="back-to-product">
                    <i class="fas fa-arrow-left"></i> ä¸Šä¸€æ­¥
                </button>
                <button class="btn btn-primary" id="preview-btn">
                    <i class="fas fa-eye"></i> é è¦½è¨‚å–®
                </button>
            </div>
        </div>
        
        <div id="preview-tab" class="tab-content">
            <div class="order-section">
                <h2><i class="fas fa-eye"></i> è¨‚å–®é è¦½</h2>
                <div id="order-preview-content">
                    <!-- é è¦½å…§å®¹å°‡ç”±JavaScriptå‹•æ…‹ç”Ÿæˆ -->
                </div>
            </div>
            
            <div class="button-group">
                <button class="btn btn-secondary" id="back-to-shipping">
                    <i class="fas fa-arrow-left"></i> ä¸Šä¸€æ­¥
                </button>
                <button class="btn btn-primary" id="confirm-order">
                    <i class="fas fa-check"></i> ç¢ºèªè¨‚å–®
                </button>
            </div>
        </div>
    </div>
    
    <div id="preview-modal" class="preview-modal">
        <div class="preview-content">
            <span class="close-preview">&times;</span>
            <div id="modal-preview-content"></div>
        </div>
    </div>
    
    <script>
        // åœ–ç‰‡ä¸Šå‚³åŠŸèƒ½ (æ”¹é€²ç‰ˆ)
        function setupImageUpload(uploadElementId, fileInputId, previewElementId) {
            const uploadElement = document.getElementById(uploadElementId);
            const fileInput = document.getElementById(fileInputId);
            const previewElement = document.getElementById(previewElementId);
            
            // é»æ“Šä¸Šå‚³
            uploadElement.addEventListener('click', () => fileInput.click());
            
            // æ‹–æ”¾ä¸Šå‚³
            uploadElement.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadElement.style.borderColor = 'var(--primary-color)';
                uploadElement.style.backgroundColor = '#e6f2ff';
            });
            
            uploadElement.addEventListener('dragleave', () => {
                uploadElement.style.borderColor = '#ccc';
                uploadElement.style.backgroundColor = '#fafafa';
            });
            
            uploadElement.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadElement.style.borderColor = '#ccc';
                uploadElement.style.backgroundColor = '#fafafa';
                
                if (e.dataTransfer.files.length) {
                    fileInput.files = e.dataTransfer.files;
                    handleFileUpload(fileInput, previewElement);
                }
            });
            
            // æ–‡ä»¶é¸æ“‡è™•ç†
            fileInput.addEventListener('change', () => {
                handleFileUpload(fileInput, previewElement);
            });
        }
        
        function handleFileUpload(fileInput, previewElement) {
            const files = fileInput.files;
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                
                // æª¢æŸ¥æ˜¯å¦ç‚ºåœ–ç‰‡
                if (!file.type.match('image.*')) {
                    alert('è«‹ä¸Šå‚³åœ–ç‰‡æ–‡ä»¶ï¼');
                    continue;
                }
                
                // æª¢æŸ¥æ–‡ä»¶å¤§å° (é™åˆ¶5MB)
                if (file.size > 5 * 1024 * 1024) {
                    alert('åœ–ç‰‡å¤§å°ä¸èƒ½è¶…é5MBï¼');
                    continue;
                }
                
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const previewContainer = document.createElement('div');
                    previewContainer.className = 'preview-container';
                    
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.className = 'preview-image';
                    img.title = file.name;
                    
                    const removeBtn = document.createElement('span');
                    removeBtn.className = 'remove-image';
                    removeBtn.innerHTML = '&times;';
                    removeBtn.addEventListener('click', function(e) {
                        e.stopPropagation();
                        previewContainer.remove();
                        updateFileInput(fileInput, previewElement);
                    });
                    
                    previewContainer.appendChild(img);
                    previewContainer.appendChild(removeBtn);
                    previewElement.appendChild(previewContainer);
                }
                
                reader.readAsDataURL(file);
            }
        }
        
        function updateFileInput(fileInput, previewElement) {
            // é€™å€‹åŠŸèƒ½åœ¨ç´”å‰ç«¯ç„¡æ³•çœŸæ­£ç§»é™¤å·²é¸æ–‡ä»¶ï¼Œå¯¦éš›æ‡‰ç”¨ä¸­éœ€è¦å¾Œç«¯æ”¯æŒ
            // é€™è£¡åªæ˜¯æ¸…ç©ºé è¦½ï¼Œå¯¦éš›æ–‡ä»¶è¼¸å…¥æ¡†çš„å€¼ä¸æœƒæ”¹è®Š
            // åœ¨å¯¦éš›æ‡‰ç”¨ä¸­ï¼Œæ‚¨å¯èƒ½éœ€è¦ä½¿ç”¨FormDataæˆ–å…¶ä»–æ–¹å¼è™•ç†æ–‡ä»¶ä¸Šå‚³
        }
        
        // è¨­ç½®å„åœ–ç‰‡ä¸Šå‚³å€åŸŸ
        setupImageUpload('main-image-upload', 'main-product-image', 'main-image-preview');
        setupImageUpload('item1-image-upload', 'item1-image', 'item1-image-preview');
        setupImageUpload('item2-image-upload', 'item2-image', 'item2-image-preview');
        
        // è‡ªè¨‚é¡è‰²é¸æ“‡
        function setupCustomColorSelect(selectId, inputId) {
            const select = document.getElementById(selectId);
            const input = document.getElementById(inputId);
            
            select.addEventListener('change', function() {
                if (this.value === 'custom') {
                    input.classList.remove('hidden');
                } else {
                    input.classList.add('hidden');
                }
            });
        }
        
        setupCustomColorSelect('item1-color', 'item1-custom-color');
        setupCustomColorSelect('item2-color', 'item2-custom-color');
        
        // åœ°å€é¸æ“‡è¯å‹•
        const citySelect = document.getElementById('customer-city');
        const districtSelect = document.getElementById('customer-district');
        
        const districtData = {
            'å°åŒ—å¸‚': ['ä¸­æ­£å€', 'å¤§åŒå€', 'ä¸­å±±å€', 'æ¾å±±å€', 'å¤§å®‰å€', 'è¬è¯å€', 'ä¿¡ç¾©å€', 'å£«æ—å€', 'åŒ—æŠ•å€', 'å…§æ¹–å€', 'å—æ¸¯å€', 'æ–‡å±±å€'],
            'æ–°åŒ—å¸‚': ['æ¿æ©‹å€', 'ä¸‰é‡å€', 'ä¸­å’Œå€', 'æ°¸å’Œå€', 'æ–°èŠå€', 'æ–°åº—å€', 'æ¨¹æ—å€', 'é¶¯æ­Œå€', 'ä¸‰å³½å€', 'æ·¡æ°´å€', 'æ±æ­¢å€', 'ç‘èŠ³å€', 'åœŸåŸå€', 'è˜†æ´²å€', 'äº”è‚¡å€', 'æ³°å±±å€', 'æ—å£å€', 'æ·±å‘å€', 'çŸ³ç¢‡å€', 'åªæ—å€', 'ä¸‰èŠå€', 'çŸ³é–€å€', 'å…«é‡Œå€', 'å¹³æºªå€', 'é›™æºªå€', 'è²¢å¯®å€', 'é‡‘å±±å€', 'è¬é‡Œå€', 'çƒä¾†å€'],
            'å°ä¸­å¸‚': ['ä¸­å€', 'æ±å€', 'å—å€', 'è¥¿å€', 'åŒ—å€', 'åŒ—å±¯å€', 'è¥¿å±¯å€', 'å—å±¯å€', 'å¤ªå¹³å€', 'å¤§é‡Œå€', 'éœ§å³°å€', 'çƒæ—¥å€', 'è±åŸå€', 'åé‡Œå€', 'çŸ³å²¡å€', 'æ±å‹¢å€', 'å’Œå¹³å€', 'æ–°ç¤¾å€', 'æ½­å­å€', 'å¤§é›…å€', 'ç¥å²¡å€', 'å¤§è‚šå€', 'æ²™é¹¿å€', 'é¾äº•å€', 'æ¢§æ£²å€', 'æ¸…æ°´å€', 'å¤§ç”²å€', 'å¤–åŸ”å€', 'å¤§å®‰å€'],
            'é«˜é›„å¸‚': ['æ¥ æ¢“å€', 'å·¦ç‡Ÿå€', 'é¼“å±±å€', 'ä¸‰æ°‘å€', 'é¹½åŸ•å€', 'å‰é‡‘å€', 'æ–°èˆˆå€', 'è‹“é›…å€', 'å‰é®å€', 'æ——æ´¥å€', 'å°æ¸¯å€', 'é³³å±±å€', 'å¤§å¯®å€', 'é³¥æ¾å€', 'æ—åœ’å€', 'ä»æ­¦å€', 'å¤§æ¨¹å€', 'å¤§ç¤¾å€', 'å²¡å±±å€', 'è·¯ç«¹å€', 'æ©‹é ­å€', 'æ¢“å®˜å€', 'å½Œé™€å€', 'æ°¸å®‰å€', 'ç‡•å·¢å€', 'ç”°å¯®å€', 'é˜¿è“®å€', 'èŒ„è£å€', 'æ¹–å…§å€', 'æ——å±±å€', 'ç¾æ¿ƒå€', 'å…§é–€å€', 'æ‰æ—å€', 'ç”²ä»™å€', 'å…­é¾œå€', 'èŒ‚æ—å€', 'æ¡ƒæºå€', 'é‚£ç‘ªå¤å€']
        };
        
        citySelect.addEventListener('change', function() {
            districtSelect.innerHTML = '<option value="">è«‹é¸æ“‡åœ°å€</option>';
            
            if (this.value === 'å…¶ä»–') {
                const option = document.createElement('option');
                option.value = 'å…¶ä»–';
                option.textContent = 'å…¶ä»–åœ°å€';
                districtSelect.appendChild(option);
            } else if (districtData[this.value]) {
                districtData[this.value].forEach(function(district) {
                    const option = document.createElement('option');
                    option.value = district;
                    option.textContent = district;
                    districtSelect.appendChild(option);
                });
            }
        });
        
        // æ¨™ç±¤é åˆ‡æ›
        const tabButtons = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const tabId = button.getAttribute('data-tab');
                
                // æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
                tabButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                // æ›´æ–°å…§å®¹å€
                tabContents.forEach(content => content.classList.remove('active'));
                document.getElementById(tabId).classList.add('active');
                
                // å¦‚æœæ˜¯é è¦½æ¨™ç±¤ï¼Œç”Ÿæˆé è¦½å…§å®¹
                if (tabId === 'preview-tab') {
                    generateOrderPreview();
                }
            });
        });
        
        // å°èˆªæŒ‰éˆ•
        document.getElementById('next-to-shipping').addEventListener('click', () => {
            document.querySelector('.tab-btn[data-tab="shipping-info"]').click();
        });
        
        document.getElementById('back-to-product').addEventListener('click', () => {
            document.querySelector('.tab-btn[data-tab="product-info"]').click();
        });
        
        document.getElementById('back-to-shipping').addEventListener('click', () => {
            document.querySelector('.tab-btn[data-tab="shipping-info"]').click();
        });
        
        // å„²å­˜æŒ‰éˆ•
        document.getElementById('save-btn').addEventListener('click', function() {
            // é€™è£¡å¯ä»¥æ·»åŠ å¯¦éš›çš„ä¿å­˜é‚è¼¯ï¼Œå¦‚AJAXè«‹æ±‚åˆ°å¾Œç«¯
            alert('è¨‚å–®è®Šæ›´å·²å„²å­˜ï¼');
            // å¯¦éš›æ‡‰ç”¨ä¸­å¯ä»¥å°‡è¡¨å–®æ•¸æ“šç™¼é€åˆ°ä¼ºæœå™¨
            // saveOrderData();
        });
        
        // é è¦½æŒ‰éˆ•
        document.getElementById('preview-btn').addEventListener('click', function() {
            generateOrderPreview();
            document.querySelector('.tab-btn[data-tab="preview-tab"]').click();
        });
        
        // ç¢ºèªè¨‚å–®æŒ‰éˆ•
        document.getElementById('confirm-order').addEventListener('click', function() {
            if (confirm('ç¢ºå®šè¦ç¢ºèªæ­¤è¨‚å–®å—ï¼Ÿ')) {
                alert('è¨‚å–®å·²ç¢ºèªï¼');
                // å¯¦éš›æ‡‰ç”¨ä¸­å¯ä»¥å°‡è¨‚å–®æ•¸æ“šæäº¤åˆ°å¾Œç«¯è™•ç†
                // submitOrder();
            }
        });
        
        // ç”Ÿæˆè¨‚å–®é è¦½
        function generateOrderPreview() {
            const previewContent = document.getElementById('order-preview-content');
            const modalPreviewContent = document.getElementById('modal-preview-content');
            
            // ç²å–æ‰€æœ‰è¡¨å–®æ•¸æ“š
            const productTitle = document.getElementById('product-title').value;
            const productPrice = document.getElementById('product-price').value;
            const groupOption = document.getElementById('group-option').value;
            const originalPrice = document.getElementById('original-price').value;
            const orderPrice = document.getElementById('order-price').value;
            const deliveryNote = document.getElementById('delivery-note').value;
            
            // ç²å–å•†å“é …ç›®æ•¸æ“š
            const item1Color = document.getElementById('item1-color').value === 'custom' ? 
                document.getElementById('item1-custom-color').value : document.getElementById('item1-color').value;
            const item2Color = document.getElementById('item2-color').value === 'custom' ? 
                document.getElementById('item2-custom-color').value : document.getElementById('item2-color').value;
            
            // ç²å–ç‰©æµæ–¹å¼
            const deliveryMethods = [];
            if (document.getElementById('delivery1').checked) deliveryMethods.push('å®…é…åˆ°åºœ');
            if (document.getElementById('delivery2').checked) deliveryMethods.push('7-11å–è²¨');
            if (document.getElementById('delivery3').checked) deliveryMethods.push('å…¨å®¶å–è²¨');
            
            // ç²å–å®¢æˆ¶ä¿¡æ¯
            const customerName = document.getElementById('customer-name').value;
            const customerPhone = document.getElementById('customer-phone').value;
            const customerCountry = document.getElementById('customer-country').value;
            const customerCity = document.getElementById('customer-city').value;
            const customerDistrict = document.getElementById('customer-district').value;
            const customerAddress = document.getElementById('customer-address').value;
            const customerMessage = document.getElementById('customer-message').value;
            const paymentMethod = document.getElementById('payment-method').value;
            
            // ç”Ÿæˆé è¦½HTML
            let previewHTML = `
                <h2># ç¢ºèªè¨‚å–®</h2>
                
                <h3>## ${productTitle}</h3>
                <div class="price">${productPrice}</div>
                <div class="promotion">${groupOption.replace(/\n/g, '<br>')}</div>
                
                <hr>
                
                <h4>### ç¬¬1ä»¶(å·²é¸) ${item1Color}*1</h4>
                <p><em>è¦æ ¼:</em></p>
                <ul>
                    <li>${item1Color}</li>
                </ul>
                
                <h4>### ç¬¬2ä»¶(å·²é¸) ${item2Color}*1</h4>
                <p><em>è¦æ ¼:</em></p>
                <ul>
                    <li>${item2Color}</li>
                </ul>
                
                <hr>
                
                <p>åŸåƒ¹: ${originalPrice}</p>
                <p><strong>è¨‚å–®åƒ¹æ ¼:</strong> ${orderPrice}</p>
                
                <p><em>ç‰©æµæ–¹å¼:</em></p>
                <p>${deliveryMethods.join(' | ')}</p>
                <p>${deliveryNote}</p>
                
                <hr>
                
                <h3>å®¢æˆ¶è³‡è¨Š</h3>
                <p><strong>å§“å:</strong> ${customerName}</p>
                <p><strong>æ‰‹æ©Ÿ:</strong> ${customerPhone}</p>
                <p><strong>åœ°å€:</strong> ${customerCountry} ${customerCity} ${customerDistrict} ${customerAddress}</p>
                <p><strong>ä»˜æ¬¾æ–¹å¼:</strong> ${paymentMethod}</p>
                ${customerMessage ? `<p><strong>ç•™è¨€:</strong> ${customerMessage}</p>` : ''}
            `;
            
            previewContent.innerHTML = previewHTML;
            modalPreviewContent.innerHTML = previewHTML;
        }
        
        // æ¨¡æ…‹æ¡†æ§åˆ¶
        const previewModal = document.getElementById('preview-modal');
        const closePreview = document.querySelector('.close-preview');
        
        // é»æ“Šé—œé–‰æŒ‰éˆ•
        closePreview.addEventListener('click', () => {
            previewModal.style.display = 'none';
        });
        
        // é»æ“Šæ¨¡æ…‹æ¡†å¤–éƒ¨
        window.addEventListener('click', (e) => {
            if (e.target === previewModal) {
                previewModal.style.display = 'none';
            }
        });
    </script>
</body>
</html>
